<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.itwillbs.mapper.stockMapper">
	
	<resultMap type="com.itwillbs.domain.TransactionVO" id="transMap">
	<id property="tran_num" column="tran_num"/>
	<result property="tran_num" column="tran_num"/>
	<result property="top_tran_num" column="top_tran_num"/>
	<result property="cli_num" column="cli_num"/>
	<result property="pic_username" column="pic_username"/>
	<result property="tran_date" column="tran_date"/>
	<result property="rec_date" column="rec_date"/>
	<result property="rel_date" column="rel_date"/>
	<result property="due_date" column="due_date"/>
	<result property="pro_status" column="pro_status"/>
	<result property="tran_cate_code" column="tran_cate_code"/>
	<result property="comm" column="comm"/>
	<collection property="goodsList" resultMap="goodsMap"></collection>
	<collection property="itemList" resultMap="itemMap"></collection>
	<collection property="inchangeList" resultMap="inchangeMap"></collection>
	</resultMap>

	<resultMap type="com.itwillbs.domain.TransactionGoodsVO" id="goodsMap">
		<id property="tran_num" column="tran_num"/>
		<id property="goods_num" column="goods_num"/>
		<result property="tran_num" column="tran_num"/>
		<result property="goods_num" column="goods_num"/>
		<result property="goods_qty" column="goods_qty"/>
	</resultMap>

	<resultMap type="com.itwillbs.domain.ItemVO" id="itemMap">
		<id property="item_num" column="item_num"/>
		<result property="item_num" column="item_num"/>
		<result property="item_cate_code" column="item_cate_code"/>
		<result property="item_cli_code" column="item_cli_code"/>
		<result property="item_name" column="item_name"/>
		<result property="item_mat" column="item_mat"/>
		<result property="comm" column="comm"/>
	</resultMap>
	
	<resultMap type="com.itwillbs.domain.InventoryChangeVO" id="inchangeMap">
		<id property="tran_num" column="tran_num"/>
		<id property="inven_num" column="inven_num"/>
		<result property="tran_num" column="tran_num"/>
		<result property="inven_num" column="inven_num"/>
		<result property="inven_qty" column="inven_qty"/>
	</resultMap>
	
	
<!-- 		item / inventory_change -->
	
	
	
	
	
	
	<!-- 입고 리스트 호출 -->
	<select id="transactionList" resultMap="transMap">
		select tr.tran_num,top_tran_num,cli_num,pic_username,tran_date,rec_date,
		tran_date,rel_date,due_date,pro_status,tran_cate_code,tr.comm,trg.goods_num,trg.goods_qty,
		it.item_num,it.item_name,inc.inven_num
		from transaction tr
		join transaction_goods trg
		on tr.tran_num = trg.tran_num
		join item it
		on it.item_cli_code = tr.cli_num
		join inventory_change inc
		on inc.tran_num = tr.tran_num
		where tran_cate_code="RC";
</select>







</mapper>